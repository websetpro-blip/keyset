# –î–û–ë–ê–í–õ–ï–ù–û: –î–ï–¢–ê–õ–¨–ù–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –ò TAB –†–ê–ó–î–ï–õ–ò–¢–ï–õ–¨ –í CSV

**–î–∞—Ç–∞:** 26.10.2025
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

---

## üéØ –ó–ê–î–ê–ß–ò

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—Ä–∞–∑—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å 0

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ —Ç–µ—Ä—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ JSONL –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –ø–∞—Ä—Å–∏–Ω–≥–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 2: CSV —ç–∫—Å–ø–æ—Ä—Ç —Å –∑–∞–ø—è—Ç–æ–π –º–æ–∂–µ—Ç –ª–æ–º–∞—Ç—å—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–ø—è—Ç—ã–µ –≤ —Ñ—Ä–∞–∑–∞—Ö –º–æ–≥—É—Ç –Ω–∞—Ä—É—à–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É CSV

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω TAB (`\t`) –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è

---

## ‚úÖ –ó–ê–î–ê–ß–ê 1: –î–ï–¢–ê–õ–¨–ù–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –ü–ê–†–°–ò–ù–ì–ê

### –§–∞–π–ª: `turbo_parser_improved.py`

#### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `log_parsing_debug()` (—Å—Ç—Ä–æ–∫–∏ 76-97)

**–§–∞–π–ª:** [turbo_parser_improved.py:76-97](c:\AI\yandex\keyset\turbo_parser_improved.py#L76-L97)

```python
def log_parsing_debug(entry: Dict[str, Any]) -> None:
    """
    –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ JSONL —Ñ–∞–π–ª –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

    –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏—Ç:
      - timestamp: ISO —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏
      - account: –∏–º—è –∞–∫–∫–∞—É–Ω—Ç–∞
      - tab: –Ω–æ–º–µ—Ä –≤–∫–ª–∞–¥–∫–∏
      - phrase: —Ñ—Ä–∞–∑–∞
      - status: —Å—Ç–∞—Ç—É—Å —ç—Ç–∞–ø–∞
      - message: –æ–ø–∏—Å–∞–Ω–∏–µ
      - ws: —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å (–µ—Å–ª–∏ –ø–æ–ª—É—á–µ–Ω–∞)
      - elapsed: –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∞–ø–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
      - error: —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
    """
    debug_log_file = LOG_DIR / 'parsing_debug.jsonl'

    try:
        with open(debug_log_file, 'a', encoding='utf-8') as f:
            f.write(json.dumps(entry, ensure_ascii=False) + '\n')
    except Exception as e:
        logging.error(f"–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ debug –ª–æ–≥–∞: {e}")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Å–æ–±—ã—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `keyset/logs/parsing_debug.jsonl`

#### 2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ—É–Ω–∫—Ü–∏—é `parse_tab()` (—Å—Ç—Ä–æ–∫–∏ 547-749)

**–≠—Ç–∞–ø—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **started** - –Ω–∞—á–∞–ª–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ñ—Ä–∞–∑—ã
2. **input_found** - –ø–æ–ª–µ –≤–≤–æ–¥–∞ –Ω–∞–π–¥–µ–Ω–æ (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏)
3. **phrase_typed** - —Ñ—Ä–∞–∑–∞ –≤–≤–µ–¥–µ–Ω–∞ –≤ –ø–æ–ª–µ
4. **enter_pressed** - Enter –Ω–∞–∂–∞—Ç, –∑–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
5. **api_waiting** - –æ–∂–∏–¥–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–∞ (—Å —Ç–∞–π–º–∞—É—Ç–æ–º)
6. **success** - —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∞ ‚úÖ
7. **api_timeout** - —Ç–∞–π–º–∞—É—Ç API (–Ω–µ –ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç) ‚ö†Ô∏è
8. **error_no_input** - –ø–æ–ª–µ –≤–≤–æ–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚ùå
9. **critical_error** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ ‚ùå

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

```python
# –õ–û–ì: –ù–∞—á–∞–ª–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
log_entry = {
    'timestamp': datetime.now().isoformat(),
    'account': self.account_name,
    'tab': tab_index + 1,
    'phrase': phrase,
    'status': 'started',
    'message': f'[TAB {tab_index + 1}] –ù–∞—á–∞–ª–æ –ø–∞—Ä—Å–∏–Ω–≥–∞: "{phrase}"'
}
log_parsing_debug(log_entry)

# ... –ø–æ–∏—Å–∫ –ø–æ–ª—è –≤–≤–æ–¥–∞ ...

# –õ–û–ì: –ü–æ–ª–µ –Ω–∞–π–¥–µ–Ω–æ
log_entry.update({
    'timestamp': datetime.now().isoformat(),
    'status': 'input_found',
    'message': f'–ü–æ–ª–µ –≤–≤–æ–¥–∞ –Ω–∞–π–¥–µ–Ω–æ: {selector}',
    'selector': selector,
    'elapsed': round(elapsed_input, 3)
})
log_parsing_debug(log_entry)

# ... –≤–≤–æ–¥ —Ñ—Ä–∞–∑—ã –∏ –Ω–∞–∂–∞—Ç–∏–µ Enter ...

# –õ–û–ì: –û–∂–∏–¥–∞–Ω–∏–µ API
t_api_start = time.time()
log_entry.update({
    'timestamp': datetime.now().isoformat(),
    'status': 'api_waiting',
    'message': f'–û–∂–∏–¥–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–∞ (timeout={timeout:.1f}s)'
})
log_parsing_debug(log_entry)

# ... –æ–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ ...

if response_received:
    # –õ–û–ì: –£—Å–ø–µ—Ö
    log_entry.update({
        'timestamp': datetime.now().isoformat(),
        'status': 'success',
        'message': f'–ß–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∞: {value}',
        'ws': value,
        'elapsed': round(elapsed_api, 3),
        'api_received': True
    })
    log_parsing_debug(log_entry)
else:
    # –õ–û–ì: –¢–∞–π–º–∞—É—Ç
    log_entry.update({
        'timestamp': datetime.now().isoformat(),
        'status': 'api_timeout',
        'message': f'API —Ç–∞–π–º–∞—É—Ç –ø–æ—Å–ª–µ {elapsed_api:.2f}s –æ–∂–∏–¥–∞–Ω–∏—è',
        'ws': 0,
        'elapsed': round(elapsed_api, 3),
        'api_received': False
    })
    log_parsing_debug(log_entry)
```

#### 3. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `handle_response()` (—Å—Ç—Ä–æ–∫–∏ 523-535)

**–§–∞–π–ª:** [turbo_parser_improved.py:523-535](c:\AI\yandex\keyset\turbo_parser_improved.py#L523-L535)

–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π API –æ—Ç–≤–µ—Ç –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –∑–∞–ø–∏—Å—å—é:

```python
# –õ–û–ì: API –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω
api_log_entry = {
    'timestamp': datetime.now().isoformat(),
    'account': self.account_name,
    'tab': 'API',
    'phrase': phrase,
    'status': 'api_response_received',
    'message': f'API –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω: {freq}',
    'ws': freq,
    'api_url': response.url,
    'api_status': response.status
}
log_parsing_debug(api_log_entry)
```

### –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞ (parsing_debug.jsonl):

```json
{"timestamp": "2025-10-26T03:15:22.123456", "account": "dsmismirnov", "tab": 1, "phrase": "—Ä–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã", "status": "started", "message": "[TAB 1] –ù–∞—á–∞–ª–æ –ø–∞—Ä—Å–∏–Ω–≥–∞: \"—Ä–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã\""}
{"timestamp": "2025-10-26T03:15:22.234567", "account": "dsmismirnov", "tab": 1, "phrase": "—Ä–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã", "status": "input_found", "message": "–ü–æ–ª–µ –≤–≤–æ–¥–∞ –Ω–∞–π–¥–µ–Ω–æ: input[name='text']", "selector": "input[name='text']", "elapsed": 0.111}
{"timestamp": "2025-10-26T03:15:22.456789", "account": "dsmismirnov", "tab": 1, "phrase": "—Ä–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã", "status": "phrase_typed", "message": "–§—Ä–∞–∑–∞ –≤–≤–µ–¥–µ–Ω–∞ –≤ –ø–æ–ª–µ", "elapsed": 0.222}
{"timestamp": "2025-10-26T03:15:22.567890", "account": "dsmismirnov", "tab": 1, "phrase": "—Ä–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã", "status": "enter_pressed", "message": "Enter –Ω–∞–∂–∞—Ç, –∑–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω", "elapsed": 0.111}
{"timestamp": "2025-10-26T03:15:22.789012", "account": "dsmismirnov", "tab": 1, "phrase": "—Ä–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã", "status": "api_waiting", "message": "–û–∂–∏–¥–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–∞ (timeout=10.0s)"}
{"timestamp": "2025-10-26T03:15:23.012345", "account": "dsmismirnov", "tab": "API", "phrase": "—Ä–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã", "status": "api_response_received", "message": "API –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω: 27892800", "ws": 27892800, "api_url": "https://wordstat.yandex.ru/api/v2/search", "api_status": 200}
{"timestamp": "2025-10-26T03:15:23.234567", "account": "dsmismirnov", "tab": 1, "phrase": "—Ä–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã", "status": "success", "message": "–ß–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∞: 27892800", "ws": 27892800, "elapsed": 0.445, "api_received": true}
```

### –ö–∞–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏:

**1. –ù–∞–π—Ç–∏ —Ñ—Ä–∞–∑—ã —Å ws=0:**
```bash
grep '"ws": 0' keyset/logs/parsing_debug.jsonl
```

**2. –ù–∞–π—Ç–∏ —Ñ—Ä–∞–∑—ã —Å —Ç–∞–π–º–∞—É—Ç–æ–º API:**
```bash
grep '"api_timeout"' keyset/logs/parsing_debug.jsonl
```

**3. –ù–∞–π—Ç–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏:**
```bash
grep '"critical_error"' keyset/logs/parsing_debug.jsonl
```

**4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—É—á–µ–Ω—ã –ª–∏ API –æ—Ç–≤–µ—Ç—ã:**
```bash
grep '"api_received": false' keyset/logs/parsing_debug.jsonl
```

---

## ‚úÖ –ó–ê–î–ê–ß–ê 2: TAB –†–ê–ó–î–ï–õ–ò–¢–ï–õ–¨ –í CSV

### –§–∞–π–ª: `parsing_tab.py`

**–ë—ã–ª–æ:** `csv.writer(f, quoting=csv.QUOTE_MINIMAL)`
**–°—Ç–∞–ª–æ:** `csv.writer(f, delimiter='\t', quoting=csv.QUOTE_MINIMAL)`

**–§–∞–π–ª:** [parsing_tab.py:848-851](c:\AI\yandex\keyset\app\tabs\parsing_tab.py#L848-L851)

```python
# –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ CSV —Å TAB —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏
# TAB –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ –∑–∞–ø—è—Ç–æ–π, —Ç.–∫. –≤ —Ñ—Ä–∞–∑–∞—Ö –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–ø—è—Ç—ã–µ
with open(file_path, 'w', newline='', encoding='utf-8-sig') as f:
    writer = csv.writer(f, delimiter='\t', quoting=csv.QUOTE_MINIMAL)
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ TAB —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è:

‚úÖ **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å:** –í —Ñ—Ä–∞–∑–∞—Ö —Ä–µ–¥–∫–æ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —Ç–∞–±—ã
‚úÖ **Excel:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –∫–æ–ª–æ–Ω–∫–∏
‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –†–∞–±–æ—Ç–∞–µ—Ç –≤ Google Sheets, LibreOffice
‚úÖ **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å:** –ß—ë—Ç–∫–æ —Ä–∞–∑–¥–µ–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ

### –ü—Ä–∏–º–µ—Ä CSV —Å TAB:

```
–§—Ä–∞–∑–∞	–ß–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å
—Ä–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä –ø–æ–¥ –∫–ª—é—á	56262
–∫—É–ø–∏—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É –º–æ—Å–∫–≤–∞	615470
–¥–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã –Ω–∞ –¥–æ–º	55432
```

(–ú–µ–∂–¥—É –∫–æ–ª–æ–Ω–∫–∞–º–∏ TAB —Å–∏–º–≤–æ–ª, –Ω–µ –ø—Ä–æ–±–µ–ª)

---

## üß™ –ö–ê–ö –¢–ï–°–¢–ò–†–û–í–ê–¢–¨

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ 10-20 —Ñ—Ä–∞–∑
2. –û—Ç–∫—Ä—ã—Ç—å `keyset/logs/parsing_debug.jsonl`
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   - –ï—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å—å `started` –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ—Ä–∞–∑—ã
   - –ï—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å—å `api_response_received` –æ—Ç API
   - –ï—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å—å `success` –∏–ª–∏ `api_timeout` –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ—Ä–∞–∑—ã
   - –ü–æ–ª–µ `elapsed` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –¢–µ—Å—Ç 2: –ê–Ω–∞–ª–∏–∑ —Ñ—Ä–∞–∑ —Å ws=0

1. –ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞–π—Ç–∏ —Ñ—Ä–∞–∑—ã —Å 0 —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å—é
2. –ò—Å–∫–∞—Ç—å –≤ `parsing_debug.jsonl` –ø–æ —Ñ—Ä–∞–∑–µ
3. **–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ï—Å–ª–∏ `api_timeout` ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å RESPONSE_WAIT_TIMEOUT
   - –ï—Å–ª–∏ `error_no_input` ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º –ø–æ–ª—è –≤–≤–æ–¥–∞
   - –ï—Å–ª–∏ `api_response_received` –µ—Å—Ç—å, –Ω–æ `success` –Ω–µ—Ç ‚Üí race condition

### –¢–µ—Å—Ç 3: –≠–∫—Å–ø–æ—Ä—Ç CSV —Å TAB

1. –ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞–∂–∞—Ç—å "–≠–∫—Å–ø–æ—Ä—Ç"
2. –û—Ç–∫—Ä—ã—Ç—å CSV –≤ Excel/Google Sheets
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   - –§—Ä–∞–∑–∞ –≤ –∫–æ–ª–æ–Ω–∫–µ A
   - –ß–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å –≤ –∫–æ–ª–æ–Ω–∫–µ B
   - –ù–µ—Ç –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã—Ö —è—á–µ–µ–∫
   - –ó–∞–ø—è—Ç—ã–µ –≤ —Ñ—Ä–∞–∑–∞—Ö –Ω–µ –ª–æ–º–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É

---

## üìä –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú

### –ï—Å–ª–∏ —Ñ—Ä–∞–∑–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 0:

1. **–ù–∞–π—Ç–∏ –≤ –ª–æ–≥–∞—Ö:**
```bash
grep "—Ñ—Ä–∞–∑–∞ —Ç–µ–∫—Å—Ç" keyset/logs/parsing_debug.jsonl
```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã:**
   - `api_timeout` ‚Üí Wordstat –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç (–ø–ª–æ—Ö–æ–π –ø—Ä–æ–∫—Å–∏? –∫–∞–ø—á–∞?)
   - `error_no_input` ‚Üí –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ–ª—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - `critical_error` ‚Üí –û—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å api_received:**
   - `true` ‚Üí API –æ—Ç–≤–µ—Ç–∏–ª, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç 0 (—ç—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å!)
   - `false` ‚Üí API –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª –∑–∞ —Ç–∞–π–º–∞—É—Ç

### –ï—Å–ª–∏ –≤—Å–µ —Ñ—Ä–∞–∑—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç 0:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∞–∫–∫–∞—É–Ω—Ç–∞
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∫—Å–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–ø—á—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
4. –£–≤–µ–ª–∏—á–∏—Ç—å RESPONSE_WAIT_TIMEOUT –¥–æ 15-20 —Å–µ–∫—É–Ω–¥

---

## ‚úÖ –ß–ï–ö-–õ–ò–°–¢

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [x] –§—É–Ω–∫—Ü–∏—è `log_parsing_debug()` –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–∞–ø–∞ `started`
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–∞–ø–∞ `input_found`
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–∞–ø–∞ `phrase_typed`
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–∞–ø–∞ `enter_pressed`
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–∞–ø–∞ `api_waiting`
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–∞–ø–∞ `success` / `api_timeout`
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `api_response_received` –≤ handle_response
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ JSONL —Ñ–æ—Ä–º–∞—Ç–µ
- [x] UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–∞
- [x] –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ (elapsed)

### CSV —ç–∫—Å–ø–æ—Ä—Ç:
- [x] TAB —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (`delimiter='\t'`)
- [x] 2 –∫–æ–ª–æ–Ω–∫–∏ (–§—Ä–∞–∑–∞, –ß–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å)
- [x] UTF-8-sig –∫–æ–¥–∏—Ä–æ–≤–∫–∞
- [x] –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é
- [x] QUOTE_MINIMAL

---

## üìù –§–ê–ô–õ–´ –ò–ó–ú–ï–ù–ï–ù–´

1. **`c:\AI\yandex\keyset\turbo_parser_improved.py`**
   - –°—Ç—Ä–æ–∫–∏ 76-97: —Ñ—É–Ω–∫—Ü–∏—è `log_parsing_debug()`
   - –°—Ç—Ä–æ–∫–∏ 523-535: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `handle_response()`
   - –°—Ç—Ä–æ–∫–∏ 556-749: –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `parse_tab()`

2. **`c:\AI\yandex\keyset\app\tabs\parsing_tab.py`**
   - –°—Ç—Ä–æ–∫–∏ 848-851: TAB —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –≤ CSV —ç–∫—Å–ø–æ—Ä—Ç–µ

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–æ:
- ‚ùå –ù–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤ ‚Üí –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –ø–æ—á–µ–º—É ws=0
- ‚ùå CSV —Å –∑–∞–ø—è—Ç–æ–π ‚Üí —Ñ—Ä–∞–∑—ã —Å –∑–∞–ø—è—Ç—ã–º–∏ –ª–æ–º–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É

### –ü–æ—Å–ª–µ:
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ JSONL –ª–æ–≥–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ ‚Üí –≤–∏–¥–Ω–æ –≥–¥–µ —Ç–µ—Ä—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ
- ‚úÖ CSV —Å TAB —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º ‚Üí –Ω–∞–¥—ë–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Excel

---

**–ê–≤—Ç–æ—Ä:** Claude (AI Assistant)
**Encoding:** UTF-8
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** –°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤–∞–ª–∏–¥–µ–Ω, –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
**–õ–æ–≥–∏:** `keyset/logs/parsing_debug.jsonl`
