# –ü–∞–∫–µ—Ç–Ω—ã–π —Å–±–æ—Ä —Ñ—Ä–∞–∑ —Å –≤—ã–±–æ—Ä–æ–º —Ä–µ–≥–∏–æ–Ω–æ–≤

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª **"–ü–∞–∫–µ—Ç–Ω—ã–π —Å–±–æ—Ä —Ñ—Ä–∞–∑"** –≤–æ –≤–∫–ª–∞–¥–∫—É **–ü–∞—Ä—Å–∏–Ω–≥** —Å–æ—Ñ—Ç–∞ Keyset —Å –ø–æ–ª–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –≤—ã–±–æ—Ä–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤ –∏–∑ –≤–∞—à–µ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ AitiCollector.

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`app/dialogs/batch_collect_dialog.py`** - –≥–ª–∞–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥ –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–±–æ—Ä–∞
   - –í–∏–¥–∂–µ—Ç –≤—ã–±–æ—Ä–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤ —Å –¥–µ—Ä–µ–≤–æ–º, –ø–æ–∏—Å–∫–æ–º –∏ —á–µ–∫–±–æ–∫—Å–∞–º–∏
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–î–µ—Å–∫—Ç–æ–ø—ã, –°–º–∞—Ä—Ç—Ñ–æ–Ω—ã, –ü–ª–∞–Ω—à–µ—Ç—ã)
   - –ü–æ—Ä–æ–≥ –ø–æ–∫–∞–∑–æ–≤
   - –û–ø—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–∏–Ω—É—Å-—Å–ª–æ–≤ –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

2. **`data/regions_tree_full.json`** - –¥–µ—Ä–µ–≤–æ —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–æ—Å—Å–∏–∏
   - –†–æ—Å—Å–∏—è (225)
     - –¶–µ–Ω—Ç—Ä (3)
     - –°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥ (17)
     - –ü–æ–≤–æ–ª–∂—å–µ (40)
     - –Æ–≥ (26)
     - –°–∏–±–∏—Ä—å (59)
     - –î–∞–ª—å–Ω–∏–π –í–æ—Å—Ç–æ–∫ (73)
     - –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º (977)
     - –°–µ–≤–µ—Ä–Ω—ã–π –ö–∞–≤–∫–∞–∑ (102444)
     - –£—Ä–∞–ª (52)

3. **`test_batch_dialog.py`** - —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`app/tabs/parsing_tab.py`**
   - –û–±–Ω–æ–≤–ª—ë–Ω –º–µ—Ç–æ–¥ `_on_batch_parsing()` - —Ç–µ–ø–µ—Ä—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥
   - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_on_batch_collect_requested()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —Å–±–æ—Ä–∞

2. **`app/dialogs/__init__.py`**
   - –î–æ–±–∞–≤–ª–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç `batch_collect_dialog`

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ó–∞–ø—É—Å–∫ –¥–∏–∞–ª–æ–≥–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ—Ñ—Ç Keyset
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **"–ü–∞—Ä—Å–∏–Ω–≥"**
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **üì¶ –ü–∞–∫–µ—Ç**
4. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–±–æ—Ä–∞ —Ñ—Ä–∞–∑

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–±–æ—Ä–∞

#### –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å (–ù–∞—Å—Ç—Ä–æ–π–∫–∏)

**–†–µ–≥–∏–æ–Ω—ã:**
- –ß–µ–∫–±–æ–∫—Å "–í—Å–µ —Ä–µ–≥–∏–æ–Ω—ã" - –≤—ã–±—Ä–∞—Ç—å –≤—Å–µ —Ä–µ–≥–∏–æ–Ω—ã –†–æ—Å—Å–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ)
- –ü–æ–∏—Å–∫ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º - –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- **–î–µ—Ä–µ–≤–æ —Ä–µ–≥–∏–æ–Ω–æ–≤ —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏** - —Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–µ–µ—Å—è –¥–µ—Ä–µ–≤–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ –Ω—É–∂–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
  - –ú–æ–∂–Ω–æ —Ä–∞—Å–∫—Ä—ã—Ç—å/—Å–≤–µ—Ä–Ω—É—Ç—å —Ä–µ–≥–∏–æ–Ω –∫–ª–∏–∫–æ–º –Ω–∞ —Å—Ç—Ä–µ–ª–æ—á–∫—É ‚ñ∏
  - **–õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ (–∫–∞–∫ –≤ AitiCollector):**
    - –ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Ä–µ–≥–∏–æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞–µ—Ç—Å—è –≤—ã–±–æ—Ä —Å–æ –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
    - –ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Ä–µ–≥–∏–æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞–µ—Ç—Å—è –≤—ã–±–æ—Ä —Å–æ –≤—Å–µ—Ö —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
    - –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤—ã–±—Ä–∞–Ω—ã —Ç–æ–ª—å–∫–æ —Å–∞–º—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã

**–ü–æ—Ä–æ–≥ –ø–æ–∫–∞–∑–æ–≤:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫–∞–∑–æ–≤ –¥–ª—è —Ñ—Ä–∞–∑—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20)

#### –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å (–§—Ä–∞–∑—ã)

**–†–µ–∂–∏–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:**
- –≤ –∞–∫—Ç–∏–≤–Ω—É—é –≥—Ä—É–ø–ø—É
- —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ –≥—Ä—É–ø–ø–∞–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–û–ø—Ü–∏–∏:**
- –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å —Ñ—Ä–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –µ—Å—Ç—å –≤ –ª—é–±–æ–π –≥—Ä—É–ø–ø–µ
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏–Ω—É—Å-—Å–ª–æ–≤–∞ –≤ –∑–∞–ø—Ä–æ—Å—ã
- –î–æ–±–∞–≤–ª—è—Ç—å "+" –æ–ø–µ—Ä–∞—Ç–æ—Ä –∫ —Å–ª–æ–≤–∞–º –∏–∑ —Å–ø–∏—Å–∫–∞

**–°–ø–∏—Å–æ–∫ —Ñ—Ä–∞–∑:**
- –í–≤–µ–¥–∏—Ç–µ —Ñ—Ä–∞–∑—ã –¥–ª—è —Å–±–æ—Ä–∞ —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç–∏ (–∫–∞–∂–¥–∞—è —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)
- –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ —Ñ–∞–π–ª–∞ –∫–Ω–æ–ø–∫–æ–π "üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ —Ñ–∞–π–ª–∞..."

**–î–µ–π—Å—Ç–≤–∏—è:**
- **‚ñ∂ –ù–∞—á–∞—Ç—å —Å–±–æ—Ä** - –¥–æ–±–∞–≤–∏—Ç—å —Ñ—Ä–∞–∑—ã –≤ —Ç–∞–±–ª–∏—Ü—É –ø–∞—Ä—Å–∏–Ω–≥–∞
- **üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ —Ñ–∞–π–ª–∞...** - –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ—Ä–∞–∑—ã –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞
- **üóë –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Å–ø–∏—Å–∫–∏** - –æ—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞

### –ü–æ—Å–ª–µ —Å–±–æ—Ä–∞

–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å —Å–±–æ—Ä":
1. –§—Ä–∞–∑—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É –≤–∫–ª–∞–¥–∫–∏ –ü–∞—Ä—Å–∏–Ω–≥
2. –í –∂—É—Ä–Ω–∞–ª–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–±–æ—Ä–∞
3. –î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥**

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤ (–∏–∑ AitiCollector)

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ **—Ç–æ—á–Ω–∞—è –∫–æ–ø–∏—è –ª–æ–≥–∏–∫–∏** –≤—ã–±–æ—Ä–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤ –∫–∞–∫ –Ω–∞ https://panel.aitibot.ru/aiti-collector:

1. **–†–∞—Å–∫—Ä—ã–≤–∞—é—â–µ–µ—Å—è –¥–µ—Ä–µ–≤–æ (QTreeWidget)** - —Ä–µ–≥–∏–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–≥–æ –¥–µ—Ä–µ–≤–∞
   - –ú–æ–∂–Ω–æ —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å/—Å–∫—Ä—ã–≤–∞—Ç—å –≤–µ—Ç–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
   - –ö–∞–∂–¥—ã–π —Ä–µ–≥–∏–æ–Ω –∏–º–µ–µ—Ç —á–µ–∫–±–æ–∫—Å –¥–ª—è –≤—ã–±–æ—Ä–∞

2. **–£–º–Ω—ã–π –≤—ã–±–æ—Ä (toggleRegion)** - –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ä–µ–≥–∏–æ–Ω–∞:
   - –†–µ–≥–∏–æ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞—é—Ç—Å—è —á–µ–∫–±–æ–∫—Å—ã —Å–æ –≤—Å–µ—Ö –ø–æ—Ç–æ–º–∫–æ–≤** (–¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤)
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞—é—Ç—Å—è —á–µ–∫–±–æ–∫—Å—ã —Å–æ –≤—Å–µ—Ö –ø—Ä–µ–¥–∫–æ–≤** (—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤)
   - –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤—ã–±–æ—Ä –Ω–∞–∏–±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤

3. **–ü–æ–∏—Å–∫** - —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–µ—Ä–µ–≤–∞:
   - –†–µ–≥–∏–æ–Ω –≤–∏–¥–µ–Ω –µ—Å–ª–∏ –≤ –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–∏ –µ—Å—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
   - –†–µ–≥–∏–æ–Ω —Ç–∞–∫–∂–µ –≤–∏–¥–µ–Ω –µ—Å–ª–∏ —É –Ω–µ–≥–æ –µ—Å—Ç—å –≤–∏–¥–∏–º—ã–µ –¥–æ—á–µ—Ä–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω—ã

4. **–†–µ–∂–∏–º "–í—Å–µ —Ä–µ–≥–∏–æ–Ω—ã"** - –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ, —Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –†–æ—Å—Å–∏—è (ID 225)
   - –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —Å–Ω–∏–º–∞—é—Ç—Å—è –≤—Å–µ —á–µ–∫–±–æ–∫—Å—ã –≤ –¥–µ—Ä–µ–≤–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```python
# RegionNode - —É–∑–µ–ª –¥–µ—Ä–µ–≤–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤
{
    "id": 225,
    "name": "–†–æ—Å—Å–∏—è",
    "children": [...],
    "parent": None
}

# FlatRegion - –ø–ª–æ—Å–∫–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
{
    "id": 225,
    "name": "–†–æ—Å—Å–∏—è",
    "path": "–†–æ—Å—Å–∏—è",
    "parent": None,
    "depth": 0
}

# –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–±–æ—Ä–∞
settings = {
    "geo_ids": [3, 17],  # ID –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
    "devices": {...},
    "threshold": 20,
    ...
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:

```bash
cd c:\AI\yandex\keyset
python test_batch_dialog.py
```

–î–∏–∞–ª–æ–≥ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ —Ñ—Ä–∞–∑–∞–º–∏. –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å —Å–±–æ—Ä" –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

## –ß—Ç–æ –¥–∞–ª—å—à–µ

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –ú–æ–∂–µ—Ç–µ:
1. –†–∞—Å—à–∏—Ä–∏—Ç—å –¥–µ—Ä–µ–≤–æ —Ä–µ–≥–∏–æ–Ω–æ–≤ –≤ `data/regions_tree_full.json`
2. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –æ–ø—Ü–∏–π –≤ –¥–∏–∞–ª–æ–≥
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å API Wordstat –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–±–æ—Ä–∞ —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç–∏

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:** Claude Code
**–î–∞—Ç–∞:** 2025-10-26
